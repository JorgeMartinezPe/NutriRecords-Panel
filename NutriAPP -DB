--
-- PostgreSQL database dump
--

-- Dumped from database version 17.0
-- Dumped by pg_dump version 17.0

-- Started on 2026-01-21 00:59:37

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 224 (class 1259 OID 16876)
-- Name: alimentacion; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.alimentacion (
    id_alimentacion integer NOT NULL,
    paciente_id bigint NOT NULL,
    tipo_dieta character varying(255),
    intolerancias text[],
    preferencias text[],
    alimentos_no_gustan text[],
    suplementos text[],
    horarios_comida jsonb
);


ALTER TABLE public.alimentacion OWNER TO postgres;

--
-- TOC entry 223 (class 1259 OID 16875)
-- Name: alimentacion_uid_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.alimentacion ALTER COLUMN id_alimentacion ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME public.alimentacion_uid_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 228 (class 1259 OID 16903)
-- Name: consultas; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.consultas (
    id_consultas integer NOT NULL,
    paciente_id bigint NOT NULL,
    fecha date NOT NULL,
    notas text NOT NULL,
    proxima_cita date NOT NULL
);


ALTER TABLE public.consultas OWNER TO postgres;

--
-- TOC entry 227 (class 1259 OID 16902)
-- Name: consultas_id_consultas_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.consultas ALTER COLUMN id_consultas ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME public.consultas_id_consultas_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 230 (class 1259 OID 16937)
-- Name: estilo_vida; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.estilo_vida (
    id_estilo_vida integer NOT NULL,
    paciente_id bigint NOT NULL,
    nivel_actividad character varying(20),
    tipo_ejercicio character varying(50),
    horas_sueno character varying(20),
    nivel_estres character varying(20),
    alcohol boolean,
    tabaco boolean
);


ALTER TABLE public.estilo_vida OWNER TO postgres;

--
-- TOC entry 229 (class 1259 OID 16936)
-- Name: estilo_vida_uid_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.estilo_vida ALTER COLUMN id_estilo_vida ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME public.estilo_vida_uid_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 222 (class 1259 OID 16798)
-- Name: historial_clinico; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.historial_clinico (
    id_historial_clinico integer NOT NULL,
    paciente_id bigint NOT NULL,
    enfermedades text[],
    alergias text[],
    cirugias text[],
    medicamentos text[],
    antecedentes_familiares text,
    notas text,
    fecha_registro timestamp without time zone DEFAULT now()
);


ALTER TABLE public.historial_clinico OWNER TO postgres;

--
-- TOC entry 221 (class 1259 OID 16797)
-- Name: historial_clinico_uid_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.historial_clinico ALTER COLUMN id_historial_clinico ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME public.historial_clinico_uid_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 232 (class 1259 OID 16957)
-- Name: mediciones; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.mediciones (
    id_medicion integer NOT NULL,
    paciente_id integer NOT NULL,
    fecha timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    peso double precision NOT NULL,
    masa_muscular double precision NOT NULL,
    grasa_corporal double precision NOT NULL,
    cintura double precision,
    altura double precision,
    created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.mediciones OWNER TO postgres;

--
-- TOC entry 231 (class 1259 OID 16956)
-- Name: mediciones_id_medicion_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.mediciones ALTER COLUMN id_medicion ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME public.mediciones_id_medicion_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 226 (class 1259 OID 16889)
-- Name: objetivos_nutricionales; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.objetivos_nutricionales (
    id_objetivos integer NOT NULL,
    paciente_id bigint NOT NULL,
    objetivo character varying(60),
    intolerancias text[],
    peso_objetivo text[],
    fecha_objetivo text[],
    notas text
);


ALTER TABLE public.objetivos_nutricionales OWNER TO postgres;

--
-- TOC entry 225 (class 1259 OID 16888)
-- Name: objetivos_nutricionales_id_alimentacion_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.objetivos_nutricionales ALTER COLUMN id_objetivos ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME public.objetivos_nutricionales_id_alimentacion_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 220 (class 1259 OID 16782)
-- Name: pacientes; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.pacientes (
    id_pacientes integer NOT NULL,
    nombre character varying(255) NOT NULL,
    apellido character varying(255) NOT NULL,
    email character varying(255) NOT NULL,
    telefono character varying(20),
    fecha_creacion timestamp without time zone DEFAULT now(),
    usuario_id bigint NOT NULL,
    edad integer NOT NULL
);


ALTER TABLE public.pacientes OWNER TO postgres;

--
-- TOC entry 219 (class 1259 OID 16781)
-- Name: pacientes_uid_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.pacientes ALTER COLUMN id_pacientes ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME public.pacientes_uid_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 218 (class 1259 OID 16712)
-- Name: usuarios; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.usuarios (
    uid integer NOT NULL,
    nombre character varying(255) NOT NULL,
    email character varying(255) NOT NULL,
    contrasena bytea NOT NULL,
    telefono character varying(20),
    fecha_creacion timestamp without time zone DEFAULT now(),
    rol character varying(50) DEFAULT 'usuario'::character varying,
    apellido character varying(255) NOT NULL
);


ALTER TABLE public.usuarios OWNER TO postgres;

--
-- TOC entry 217 (class 1259 OID 16711)
-- Name: usuarios_uid_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.usuarios ALTER COLUMN uid ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME public.usuarios_uid_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 4696 (class 2606 OID 16882)
-- Name: alimentacion alimentacion_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.alimentacion
    ADD CONSTRAINT alimentacion_pkey PRIMARY KEY (id_alimentacion);


--
-- TOC entry 4700 (class 2606 OID 16909)
-- Name: consultas consultas_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.consultas
    ADD CONSTRAINT consultas_pkey PRIMARY KEY (id_consultas);


--
-- TOC entry 4702 (class 2606 OID 16942)
-- Name: estilo_vida estilo_vida_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.estilo_vida
    ADD CONSTRAINT estilo_vida_pkey PRIMARY KEY (id_estilo_vida);


--
-- TOC entry 4691 (class 2606 OID 16805)
-- Name: historial_clinico historial_clinico_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.historial_clinico
    ADD CONSTRAINT historial_clinico_pkey PRIMARY KEY (id_historial_clinico);


--
-- TOC entry 4706 (class 2606 OID 16963)
-- Name: mediciones mediciones_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.mediciones
    ADD CONSTRAINT mediciones_pkey PRIMARY KEY (id_medicion);


--
-- TOC entry 4698 (class 2606 OID 16895)
-- Name: objetivos_nutricionales objetivos_nutricionales_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.objetivos_nutricionales
    ADD CONSTRAINT objetivos_nutricionales_pkey PRIMARY KEY (id_objetivos);


--
-- TOC entry 4687 (class 2606 OID 16791)
-- Name: pacientes pacientes_email_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.pacientes
    ADD CONSTRAINT pacientes_email_key UNIQUE (email);


--
-- TOC entry 4689 (class 2606 OID 16789)
-- Name: pacientes pacientes_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.pacientes
    ADD CONSTRAINT pacientes_pkey PRIMARY KEY (id_pacientes);


--
-- TOC entry 4704 (class 2606 OID 16944)
-- Name: estilo_vida uq_estilo_vida; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.estilo_vida
    ADD CONSTRAINT uq_estilo_vida UNIQUE (paciente_id);


--
-- TOC entry 4694 (class 2606 OID 16807)
-- Name: historial_clinico uq_historial_paciente; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.historial_clinico
    ADD CONSTRAINT uq_historial_paciente UNIQUE (paciente_id);


--
-- TOC entry 4683 (class 2606 OID 16722)
-- Name: usuarios usuarios_email_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.usuarios
    ADD CONSTRAINT usuarios_email_key UNIQUE (email);


--
-- TOC entry 4685 (class 2606 OID 16720)
-- Name: usuarios usuarios_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.usuarios
    ADD CONSTRAINT usuarios_pkey PRIMARY KEY (uid);


--
-- TOC entry 4692 (class 1259 OID 16813)
-- Name: idx_historial_paciente; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_historial_paciente ON public.historial_clinico USING btree (paciente_id);


--
-- TOC entry 4708 (class 2606 OID 16808)
-- Name: historial_clinico fk_historial_paciente; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.historial_clinico
    ADD CONSTRAINT fk_historial_paciente FOREIGN KEY (paciente_id) REFERENCES public.pacientes(id_pacientes) ON DELETE CASCADE;


--
-- TOC entry 4713 (class 2606 OID 16964)
-- Name: mediciones fk_mediciones_paciente; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.mediciones
    ADD CONSTRAINT fk_mediciones_paciente FOREIGN KEY (paciente_id) REFERENCES public.pacientes(id_pacientes) ON DELETE CASCADE;


--
-- TOC entry 4712 (class 2606 OID 16945)
-- Name: estilo_vida fk_paciente; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.estilo_vida
    ADD CONSTRAINT fk_paciente FOREIGN KEY (paciente_id) REFERENCES public.pacientes(id_pacientes) ON DELETE CASCADE;


--
-- TOC entry 4709 (class 2606 OID 16883)
-- Name: alimentacion fk_paciente_alimentacion; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.alimentacion
    ADD CONSTRAINT fk_paciente_alimentacion FOREIGN KEY (paciente_id) REFERENCES public.pacientes(id_pacientes) ON DELETE CASCADE;


--
-- TOC entry 4711 (class 2606 OID 16910)
-- Name: consultas fk_paciente_consultas; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.consultas
    ADD CONSTRAINT fk_paciente_consultas FOREIGN KEY (paciente_id) REFERENCES public.pacientes(id_pacientes) ON DELETE CASCADE;


--
-- TOC entry 4710 (class 2606 OID 16896)
-- Name: objetivos_nutricionales fk_paciente_objetivos_nutricionales; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.objetivos_nutricionales
    ADD CONSTRAINT fk_paciente_objetivos_nutricionales FOREIGN KEY (paciente_id) REFERENCES public.pacientes(id_pacientes) ON DELETE CASCADE;


--
-- TOC entry 4707 (class 2606 OID 16792)
-- Name: pacientes fk_paciente_usuario; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.pacientes
    ADD CONSTRAINT fk_paciente_usuario FOREIGN KEY (usuario_id) REFERENCES public.usuarios(uid) ON DELETE CASCADE;


-- Completed on 2026-01-21 00:59:37

--
-- PostgreSQL database dump complete
--

